<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="keywords" content="ntinternals undocumented functions windows nt ntapi ntdll">
<meta http-equiv="Content-Style-Type" content="text/css">
<script type="text/JavaScript"> if (window.name != "content") window.location = "../../../../index.html?page=UserMode%2FUndocumented%20Functions%2FNT%20Objects%2FProcess%2FPEB.html"; </script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<meta name="generator" content="chm2web Pro 2.85 (unicode)">
<title>PEB</title>
<link href="../../../../tomek.css" rel="stylesheet" type="text/css" title="Style">
<link rel="stylesheet" href="../../../../files/helpindex.css" type="text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "UserMode/Undocumented Functions/NT Objects/Process/PEB.html";
</script>

</head>
<body>
<!-- !chm2web! -->

<h3 class="Header">Undocumented functions of NTDLL</h3>

<p align="right" class="CompileDate">2OO1, 2 March</p>
<br>

<div class="text">PEB</div>

<div class="highlight">PEB</div>
<br>

<pre class="FnDefinition">
typedef struct _PEB {
<br>

  BOOLEAN                 <i><font color="blue">InheritedAddressSpace</font></i>;
  BOOLEAN                 <i><font color="blue">ReadImageFileExecOptions</font></i>;
  BOOLEAN                 <i><font color="blue">BeingDebugged</font></i>;
  BOOLEAN                 <i><font color="blue">Spare</font></i>;
  HANDLE                  <i><font color="blue">Mutant</font></i>;
  PVOID                   <i><font color="blue">ImageBaseAddress</font></i>;
  PPEB_LDR_DATA           <i><font color="blue">LoaderData</font></i>;
  PRTL_USER_PROCESS_PARAMETERS <i><font color="blue">ProcessParameters</font></i>;
  PVOID                   <i><font color="blue">SubSystemData</font></i>;
  PVOID                   <i><font color="blue">ProcessHeap</font></i>;
  PVOID                   <i><font color="blue">FastPebLock</font></i>;
  PPEBLOCKROUTINE         <i><font color="blue">FastPebLockRoutine</font></i>;
  PPEBLOCKROUTINE         <i><font color="blue">FastPebUnlockRoutine</font></i>;
  ULONG                   <i><font color="blue">EnvironmentUpdateCount</font></i>;
  PPVOID                  <i><font color="blue">KernelCallbackTable</font></i>;
  PVOID                   <i><font color="blue">EventLogSection</font></i>;
  PVOID                   <i><font color="blue">EventLog</font></i>;
  PPEB_FREE_BLOCK         <i><font color="blue">FreeList</font></i>;
  ULONG                   <i><font color="blue">TlsExpansionCounter</font></i>;
  PVOID                   <i><font color="blue">TlsBitmap</font></i>;
  ULONG                   <i><font color="blue">TlsBitmapBits[0x2]</font></i>;
  PVOID                   <i><font color="blue">ReadOnlySharedMemoryBase</font></i>;
  PVOID                   <i><font color="blue">ReadOnlySharedMemoryHeap</font></i>;
  PPVOID                  <i><font color="blue">ReadOnlyStaticServerData</font></i>;
  PVOID                   <i><font color="blue">AnsiCodePageData</font></i>;
  PVOID                   <i><font color="blue">OemCodePageData</font></i>;
  PVOID                   <i><font color="blue">UnicodeCaseTableData</font></i>;
  ULONG                   <i><font color="blue">NumberOfProcessors</font></i>;
  ULONG                   <i><font color="blue">NtGlobalFlag</font></i>;
  BYTE                    <i><font color="blue">Spare2[0x4]</font></i>;
  LARGE_INTEGER           <i><font color="blue">CriticalSectionTimeout</font></i>;
  ULONG                   <i><font color="blue">HeapSegmentReserve</font></i>;
  ULONG                   <i><font color="blue">HeapSegmentCommit</font></i>;
  ULONG                   <i><font color="blue">HeapDeCommitTotalFreeThreshold</font></i>;
  ULONG                   <i><font color="blue">HeapDeCommitFreeBlockThreshold</font></i>;
  ULONG                   <i><font color="blue">NumberOfHeaps</font></i>;
  ULONG                   <i><font color="blue">MaximumNumberOfHeaps</font></i>;
  PPVOID                  <i><font color="blue">*ProcessHeaps</font></i>;
  PVOID                   <i><font color="blue">GdiSharedHandleTable</font></i>;
  PVOID                   <i><font color="blue">ProcessStarterHelper</font></i>;
  PVOID                   <i><font color="blue">GdiDCAttributeList</font></i>;
  PVOID                   <i><font color="blue">LoaderLock</font></i>;
  ULONG                   <i><font color="blue">OSMajorVersion</font></i>;
  ULONG                   <i><font color="blue">OSMinorVersion</font></i>;
  ULONG                   <i><font color="blue">OSBuildNumber</font></i>;
  ULONG                   <i><font color="blue">OSPlatformId</font></i>;
  ULONG                   <i><font color="blue">ImageSubSystem</font></i>;
  ULONG                   <i><font color="blue">ImageSubSystemMajorVersion</font></i>;
  ULONG                   <i><font color="blue">ImageSubSystemMinorVersion</font></i>;
  ULONG                   <i><font color="blue">GdiHandleBuffer[0x22]</font></i>;
  ULONG                   <i><font color="blue">PostProcessInitRoutine</font></i>;
  ULONG                   <i><font color="blue">TlsExpansionBitmap</font></i>;
  BYTE                    <i><font color="blue">TlsExpansionBitmapBits[0x80]</font></i>;
  ULONG                   <i><font color="blue">SessionId</font></i>;

} PEB, *PPEB;
</pre>
<br>
<br>
<br>
Structure <b><u>PEB</u></b> <i>(Process Enviroment Block)</i>
contains all <i>User-Mode</i> parameters associated by system with
current process.<br>
<br>

<hr width="40%">
<br>

<ul>
<li>InheritedAddressSpace &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ReadImageFileExecOptions &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>BeingDebugged &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>Spare &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>Mutant &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ImageBaseAddress &#160;&#160;&#160;&#160;Address of executable
image in process' memory.</li>
</ul>

<ul>
<li>LoaderData &#160;&#160;&#160;&#160;Pointer to <a href="../../../Structures/PEB_LDR_DATA.html">PEB_LDR_DATA</a> structure
contains information filled by Loader.</li>
</ul>

<ul>
<li>ProcessParameters &#160;&#160;&#160;&#160;Pointer to <a href="../../../Structures/RTL_USER_PROCESS_PARAMETERS.html">RTL_USER_PROCESS_PARAMETERS</a>
structure.</li>
</ul>

<ul>
<li>SubSystemData &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ProcessHeap &#160;&#160;&#160;&#160;Address of process' first
heap allocated by Loader.</li>
</ul>

<ul>
<li>FastPebLock &#160;&#160;&#160;&#160;Parameter for
<b><u>PEBLOCKROUTINE</u></b> (see below).</li>
</ul>

<ul>
<li>FastPebLockRoutine &#160;&#160;&#160;&#160;Address of
fast-locking routine for <b><u>PEB</u></b>. Definition of routine
is:<br>

<dl>
<dd><b>typedef void
(*</b><b><u>PPEBLOCKROUTINE</u></b><b>)(</b><br>
</dd>

<dd>PVOID PebLock<br></dd>

<dd><b>);</b>
</dd>
</dl></li>
</ul>

<ul>
<li>FastPebUnlockRoutine &#160;&#160;&#160;&#160;<b><u>PEB</u></b>
fast-unlock routine.</li>
</ul>

<ul>
<li>EnvironmentUpdateCount &#160;&#160;&#160;&#160;Counter of
process environment updates.</li>
</ul>

<ul>
<li>KernelCallbackTable &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>EventLogSection &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>EventLog &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>FreeList &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>TlsExpansionCounter &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>TlsBitmap &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>TlsBitmapBits[0x2] &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ReadOnlySharedMemoryBase &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ReadOnlySharedMemoryHeap &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ReadOnlyStaticServerData &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>AnsiCodePageData &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>OemCodePageData &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>UnicodeCaseTableData &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>NumberOfProcessors &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>NtGlobalFlag &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>Spare2[0x4] &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>CriticalSectionTimeout &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>HeapSegmentReserve &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>HeapSegmentCommit &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>HeapDeCommitTotalFreeThreshold &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>HeapDeCommitFreeBlockThreshold &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>NumberOfHeaps &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>MaximumNumberOfHeaps &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>*ProcessHeaps &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>GdiSharedHandleTable &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ProcessStarterHelper &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>GdiDCAttributeList &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>LoaderLock &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>OSMajorVersion &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>OSMinorVersion &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>OSBuildNumber &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>OSPlatformId &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ImageSubSystem &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ImageSubSystemMajorVersion &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>ImageSubSystemMinorVersion &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>GdiHandleBuffer[0x22] &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>PostProcessInitRoutine &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>TlsExpansionBitmap &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>TlsExpansionBitmapBits[0x80] &#160;&#160;&#160;&#160;</li>
</ul>

<ul>
<li>SessionId &#160;&#160;&#160;&#160;<br>
<br>
<br>

<dl>
<dt class="Require">Documented by:</dt>

<dd><strong>Reactos</strong>
</dd>

<dd><strong>Tomasz Nowak</strong>
</dd>

<dd><br>
<br>
<br>
</dd>
</dl></li>
</ul>

<div class="Require">Requirements:</div>

<dl>
<dd>Library: <strong class="req">ntdll.lib</strong><br>
<br>
<br></dd>
</dl>

<div class="Require">See also:</div>

<dl>
<dd><a href="../../../Undocumented%20Functions/NT%20Objects/Process/NtQueryInformationProcess.html">
NtQueryInformationProcess</a><br>
</dd>

<dd><a href="../../../Undocumented%20Functions/NT%20Objects/Process/PEB_FREE_BLOCK.html">
PEB_FREE_BLOCK</a><br>
</dd>

<dd><a href="../../../Structures/PEB_LDR_DATA.html">PEB_LDR_DATA</a><br>
</dd>

<dd><a href="PROCESS_BASIC_INFORMATION.html">PROCESS_BASIC_INFORMATION</a><br>
</dd>

<dd><a href="../../../Structures/RTL_USER_PROCESS_PARAMETERS.html">RTL_USER_PROCESS_PARAMETERS</a><br>

</dd>

<dd><a href="TEB.html">TEB</a><br>
</dd>
</dl>

<hr width="0" size="0" noshade class="page">

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>